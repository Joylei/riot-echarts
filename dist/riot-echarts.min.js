!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("echarts"),require("riot")):"function"==typeof define&&define.amd?define("riot-echarts",["echarts","riot"],e):t.riotECharts=e(t.echarts,t.riot)}(this,function(t,e){"use strict";function r(t,e){void 0===e&&(e={});var r=t||{};return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}function a(t,e,a){var o={legend:{padding:5,itemGap:10,data:[]},tooltip:{trigger:"item"},toolbox:{show:!0,feature:{magicType:{type:["line","bar","stack"],title:{line:"Line Chart",bar:"Column Chart",stack:"Stacked Bar Chart"}},restore:{title:"Restore"},saveAsImage:{title:"Save AS Image"}}},xAxis:[{type:"category",boundaryGap:!1,axisLabel:{show:!0,interval:"auto",textStyle:{fontStyle:"italic"}},data:[]}],yAxis:[{type:"value",boundaryGap:[.1,.1]}],series:[],color:c,calculable:!1,dataZoom:{show:!0,realtime:!0,handleColor:"#018564",fillerColor:"#80D9C3",handleSize:3,height:20,start:50,end:100}},n=e.columnCount;if(n>1){for(var i=1;i<n;i++){var f=e.getColumn(i).field;o.legend.data.push(f);var u=r({name:f,type:t,data:[]},a);o.series.push(u)}for(var s=e.rowCount,d=0;d<s;d++)for(var l=0;l<n;l++)0===l?o.xAxis[0].data.push(e.getValue(d,l)):o.series[l-1].data.push(e.getValue(d,l))}return o}function o(t,e){var r=s[t];if(r){var a=e instanceof i?e:new i(e);return r(a)}}function n(t,e,r){var a=null;return function(){for(var o=[],n=arguments.length;n--;)o[n]=arguments[n];var i=r||this;clearTimeout(a),a=setTimeout(function(){t.apply(i,o)},e)}}var i=function(t){var e=this;t=t||[],this.columns=[];var r=t[0]||[];r.forEach(function(t){return e.columns.push({field:t})}),this.rows=t.slice(1)},f={columnCount:{},rowCount:{}};i.prototype.getColumn=function(t){return this.columns[t]},f.columnCount.get=function(){return this.columns.length},f.rowCount.get=function(){return this.rows.length},i.prototype.getRow=function(t){return this.rows[t]},i.prototype.getValue=function(t,e){if(t<0||e<0)return null;var r=this.rows[t];return r?r[e]:null},i.prototype.setValue=function(t,e,r){if(!(t<0||e<0)){var a=this.rows[t]||(this.rows[t]=[]);a[e]=r}},i.prototype.toJSON=function(){var t=this;return this.rows.map(function(e){var r={};return t.columns.forEach(function(t,a){return r[t.field]=e[a]}),r})},Object.defineProperties(i.prototype,f);var u=Object.freeze({default:i}),c=["#a489d6","#239afc","#54d81c","#5856ce","#4386a0","#093084","#26aabf","#5a25f9","#76a0db","#7588dd","#f7eb91","#daf783","#d321e0","#7634ef","#05bc9b","#cea146","#ffbfc0","#5dfc7d","#ffc9f9","#9ad5e0","#8ea4e5","#490c7f","#49fcb4","#20a33c","#f7ee40","#fcf63f","#efef1f","#f45642","#e08374","#30b6ff","#f75f4f","#27ddd7","#af2f49","#dbc4fc","#53b220","#a71dd1","#15bfa2","#f79f9e","#c92427","#380170","#ed9f78","#f464d5","#dd6158","#f7cfad","#36e830","#80f782","#90f9ac","#c69715","#0a8ed6","#9ec942","#f9b1c8","#a114ff","#51dba4","#a4abf2"],s={line:function(t){return a("line",t)},bar:function(t){return a("bar",t,{barMaxWidth:25,label:{normal:{show:!0,position:"outside"}}})},pie:function(t){var e={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[],color:c},r={name:"Data",type:"pie",radius:"55%",center:["50%","50%"],data:[]};r.name=(t.getColumn(0)||{}).field||"Data";for(var a=0,o=t.rowCount;a<o;a++){var n={name:t.getValue(a,0)||"Untitled"+a,value:t.getValue(a,1)||0};r.data.push(n)}return e.series.push(r),e}},d=Object.freeze({default:o}),l=500;e.tag("echart",'<div class="chart" ref="chartHost" ></div>','echart, echart .chart,[data-is="echart"], [data-is="echart"] .chart {display:block; width:100%; height: 100%;}',function(e){var r=this,a=null;Object.defineProperty(r,"chartHost",{configurable:!1,enumerable:!1,get:function(){return r.refs.chartHost}}),r.on("mount",function(){"function"==typeof e.fetch?e.fetch(function(t,e){e?console.error(e):r.drawChart(t)}):r.update()}),r.on("unmount",function(){r.destroyChart()}),r.on("updated",function(){e.data&&r.drawChart(e.data)}),r.drawChart=n(function(n){if(r.isMounted&&r.chartHost){a||(a=t.init(r.chartHost));var i=e.chart_type||"pie",f=o(i,n);f&&a&&a.setOption(f)}},l),r.redrawChart=function(){r.destroyChart(),r.update()},r.destroyChart=function(){a&&(a.despose(),a=null)}});var h={DataTable:u,factory:d};return h});
//# sourceMappingURL=riot-echarts.min.js.map
