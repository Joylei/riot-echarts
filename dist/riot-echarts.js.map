{"version":3,"file":null,"sources":["../src/dataTable.ts","../src/util.ts","../src/chartFactory.ts","../src/echart.ts","../src/index.ts"],"sourcesContent":["type Field = { field: string };\r\n/**\r\n* Wrap data array for convinient operations.\r\n* the first line of the array is columns,\r\n* and the rest lines are data rows\r\n*/\r\nexport default class DataTable {\r\n    columns: Field[];\r\n    rows: any[][];\r\n    /**\r\n    * @param {Object[][]} data the first line of the array is columns,and the rest lines are data rows\r\n    */\r\n    constructor(data: any[][]) {\r\n        data = data || [];\r\n\r\n        this.columns = [];\r\n        let columns = data[0] || [];\r\n        columns.forEach(item => this.columns.push({ field: item }))\r\n        this.rows = data.slice(1);\r\n    }\r\n\r\n    getColumn(col: number) {\r\n        return this.columns[col];\r\n    }\r\n\r\n    get columnCount() {\r\n        return this.columns.length;\r\n    }\r\n\r\n    get rowCount() {\r\n        return this.rows.length;\r\n    }\r\n\r\n    getRow(row: number) {\r\n        return this.rows[row];\r\n    }\r\n\r\n    getValue(row: number, col: number) {\r\n        if (row < 0 || col < 0) return null;\r\n\r\n        const item = this.rows[row];\r\n        return item ? item[col] : null;\r\n    }\r\n\r\n    setValue(row: number, col: number, val) {\r\n        if (row < 0 || col < 0) return;\r\n\r\n        const item = this.rows[row] || (this.rows[row] = []);\r\n        item[col] = val;\r\n    }\r\n\r\n    /**\r\n    * convert data rows to objects\r\n    * @return {Object[]}\r\n    */\r\n    toJSON(): Object[] {\r\n        return this.rows.map(row => {\r\n            const item = {};\r\n            this.columns.forEach((col, index) => item[col.field] = row[index])\r\n            return item;\r\n        });\r\n    }\r\n}\r\n","export function extend(dest, src = {}){\n    const obj = dest || {}\n    Object.keys(src).forEach(key =>{\n        obj[key] = src[key]\n    });\n    return obj;\n}","import DataTable from './dataTable';\r\nimport {extend} from './util';\r\n\r\nconst COLORS = ['#a489d6', '#239afc', '#54d81c', '#5856ce', '#4386a0', '#093084', '#26aabf', '#5a25f9', '#76a0db', '#7588dd', '#f7eb91', '#daf783', '#d321e0', '#7634ef', '#05bc9b', '#cea146', '#ffbfc0', '#5dfc7d', '#ffc9f9', '#9ad5e0', '#8ea4e5', '#490c7f', '#49fcb4', '#20a33c', '#f7ee40', '#fcf63f', '#efef1f', '#f45642', '#e08374', '#30b6ff', '#f75f4f', '#27ddd7', '#af2f49', '#dbc4fc', '#53b220', '#a71dd1', '#15bfa2', '#f79f9e', '#c92427', '#380170', '#ed9f78', '#f464d5', '#dd6158', '#f7cfad', '#36e830', '#80f782', '#90f9ac', '#c69715', '#0a8ed6', '#9ec942', '#f9b1c8', '#a114ff', '#51dba4', '#a4abf2'];\r\n\r\nfunction create(chartType, table, extra?:any) {\r\n    let option = {\r\n        legend: { // legend configuration\r\n            padding: 5, // The inner padding of the legend, in px, defaults to 5. Can be set as array - [top, right, bottom, left].\r\n            itemGap: 10, // The pixel gap between each item in the legend. It is horizontal in a legend with horizontal layout, and vertical in a legend with vertical layout.\r\n            data: []\r\n        },\r\n        tooltip: { // tooltip configuration\r\n            trigger: 'item', // trigger type. Defaults to data trigger. Can also be: 'axis'\r\n        },\r\n        toolbox: {\r\n            show: true,\r\n            feature: {\r\n                magicType: {\r\n                    type: ['line', 'bar', 'stack'],\r\n                    title: {\r\n                        'line': 'Line Chart',\r\n                        'bar': 'Column Chart',\r\n                        'stack': 'Stacked Bar Chart'\r\n                    }\r\n                },\r\n                restore: {\r\n                    title: 'Restore'\r\n                },\r\n                saveAsImage: {\r\n                    title: 'Save AS Image'\r\n                },\r\n            }\r\n        },\r\n        xAxis: [ // The horizontal axis in Cartesian coordinates\r\n            {\r\n                type: 'category', // Axis type. xAxis is category axis by default. As for value axis, please refer to the 'yAxis' chapter.\r\n                boundaryGap: false,\r\n                axisLabel: {\r\n                    show: true,\r\n                    interval: 'auto',\r\n                    textStyle: {\r\n                        fontStyle: 'italic'\r\n                    }\r\n                },\r\n                data: []\r\n            }\r\n        ],\r\n        yAxis: [ // The vertical axis in Cartesian coordinates\r\n            {\r\n                type: 'value', // Axis type. yAxis is value axis by default. As for category axis, please refer to the 'xAxis' chapter.\r\n                boundaryGap: [0.1, 0.1], // Blank border on each side of the coordinate axis. Value in the array represents percentage.\r\n                //splitNumber: 4 // Applicable to value axis. The number of segments. Defaults to 5.\r\n            }\r\n        ],\r\n        series: [],\r\n        color: COLORS,\r\n        calculable: false,\r\n        dataZoom: {\r\n            show: true,\r\n            realtime: true,\r\n            //dataBackgroundColor: \"#80D9C3\",\r\n            handleColor: '#018564',\r\n            fillerColor: '#80D9C3',\r\n            handleSize: 3,\r\n            //y : 'bottom',\r\n            height: 20,\r\n            start: 50,\r\n            end: 100\r\n        }\r\n    };\r\n    const colCount = table.columnCount;\r\n    if (colCount > 1) {\r\n        for (let colIndex = 1; colIndex < colCount; colIndex++) {\r\n            const colName = table.getColumn(colIndex).field;\r\n            option.legend.data.push(colName);\r\n            const item = extend({\r\n                name: colName,\r\n                type: chartType,\r\n                data: []\r\n            }, extra);\r\n            option.series.push(item);\r\n        }\r\n        const rowCount = table.rowCount;\r\n        for (let i = 0; i < rowCount; i++) {\r\n            for (let j = 0; j < colCount; j++) {\r\n                if (j === 0) {\r\n                    option.xAxis[0].data.push(table.getValue(i, j));\r\n                } else {\r\n                    option.series[j - 1].data.push(table.getValue(i, j));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return option;\r\n}\r\n\r\nconst factory = {\r\n    'line': function(table) {\r\n        return create('line', table);\r\n    },\r\n    'bar': function(table) {\r\n        return create('bar', table, {\r\n            barMaxWidth: 25,\r\n            label: {\r\n                normal: {\r\n                    show: true,\r\n                    position: 'outside'\r\n                }\r\n            }\r\n        });\r\n    },\r\n    'pie': function(table) {\r\n        let option = {\r\n            tooltip: {\r\n                trigger: 'item',\r\n                formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n            },\r\n            series: [],\r\n            color: COLORS\r\n        };\r\n        let serie = {\r\n            name: 'Data',\r\n            type: 'pie',\r\n            radius: '55%',\r\n            center: ['50%', '50%'],\r\n            data: []\r\n        };\r\n        serie.name = (table.getColumn(0) || {}).field || 'Data';\r\n        for (let rowIndex = 0, rowCount = table.rowCount; rowIndex < rowCount; rowIndex++) {\r\n            let item = {\r\n                name: table.getValue(rowIndex, 0) || ('Untitled' + rowIndex),\r\n                value: table.getValue(rowIndex, 1) || 0\r\n            };\r\n            serie.data.push(item);\r\n        }\r\n\r\n        option.series.push(serie);\r\n        return option;\r\n    }\r\n};\r\n\r\nexport default function createChartOption(chartType, data) {\r\n    let fn = factory[chartType];\r\n    if (fn) {\r\n        let table = data instanceof DataTable ? data : new DataTable(data);\r\n        return fn(table);\r\n    }\r\n}\r\n","import factory from './chartFactory';\r\nimport * as echarts from 'echarts'\r\nimport DataTable from './dataTable';\r\nimport * as riot from 'riot';\r\n\r\ninterface IEchartTag extends RiotTag {\r\n    isMounted: boolean;\r\n    drawChart(data?: any);\r\n    redrawChart();\r\n    destroyChart();\r\n    chartHost: HTMLElement;\r\n}\r\n\r\ninterface IEchartTagOpts {\r\n    /**\r\n     * fetch data\r\n     */\r\n    fetch?: (cb: (err, data) => any) => any;\r\n    /**\r\n     * the chart type to be rendered\r\n     */\r\n    chart_type: string;\r\n    /**\r\n     * provide data directly; otherwise be provided by fetch function\r\n     */\r\n    data?: DataTable | any[];\r\n}\r\n\r\nconst DRAW_DELAY = 500;\r\n/**\r\n   * delay function call until there is no more invocation;\r\n   * taken from https://remysharp.com/2010/07/21/throttling-function-calls\r\n   * @param  {Function} fn    [description]\r\n   * @param  {number}   delay [description]\r\n   * @param  {any}      scope [description]\r\n   * @return {Function}       [description]\r\n   */\r\nfunction debounce(fn: Function, delay: number, scope?: any) {\r\n    let timer = null;\r\n    return function(...args) {\r\n        let context = scope || this;\r\n        clearTimeout(timer);\r\n        timer = setTimeout(function() {\r\n            fn.apply(context, args);\r\n        }, delay);\r\n    };\r\n}\r\n\r\nriot.tag('echart', '<div class=\"chart\" ref=\"chartHost\" ></div>',\r\n    'echart, echart .chart,[data-is=\"echart\"], [data-is=\"echart\"] .chart {display:block; width:100%; height: 100%;}', \r\n    function(opts: IEchartTagOpts) {\r\n    let self = <IEchartTag>this;\r\n    let chart = null;\r\n\r\n    Object.defineProperty(self, 'chartHost', {\r\n        configurable: false,\r\n        enumerable: false,\r\n        get(){\r\n            return self.refs['chartHost']\r\n        }\r\n    });\r\n\r\n    self.on('mount', () => {\r\n        if (typeof opts.fetch === 'function') {\r\n            opts.fetch((data, err) => {\r\n                if (err) {\r\n                    console.error(err);\r\n                } else {\r\n                    self.drawChart(data);\r\n                }\r\n            });\r\n        } else{\r\n            self.update();\r\n        }\r\n    });\r\n\r\n    self.on('unmount', () => {\r\n        self.destroyChart();\r\n    });\r\n\r\n    self.on('updated', () => {\r\n        if (opts.data) {\r\n            self.drawChart(opts.data);\r\n        }\r\n    });\r\n\r\n    self.drawChart = debounce((data) => {\r\n        if (!self.isMounted || !self.chartHost) {\r\n            return;\r\n        }\r\n        if (!chart) {\r\n            chart = echarts.init(self.chartHost);\r\n        }\r\n        const chartType = opts.chart_type || 'pie';\r\n        const option = factory(chartType, data);\r\n        if (option && chart) {\r\n            chart.setOption(option);\r\n        }\r\n    }, DRAW_DELAY);\r\n\r\n    self.redrawChart = () => {\r\n        self.destroyChart();\r\n        self.update();\r\n    };\r\n\r\n    self.destroyChart = () => {\r\n        if (chart) {\r\n            chart.despose();\r\n            chart = null;\r\n        }\r\n    };\r\n});\r\n","import * as DataTable from './dataTable';\r\nimport * as factory from './chartFactory';\r\nimport './echart';\r\n\r\nexport default {\r\n    DataTable,\r\n    factory\r\n};\r\n"],"names":["this","const","let","riot.tag","echarts.init","factory","DataTable"],"mappings":";;;;;;AACA;;;;;AAKe,mCAMC,IAAa;;;QACjB,GAAG,IAAI,IAAI,EAAE,CAAC;QAEd,CAAC,OAAO,GAAG,EAAE,CAAC;QACd,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;WACrB,CAAC,OAAO,CAAC,UAAA,IAAI,WAAIA,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,GAAA,CAAC,CAAA;QACvD,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;CAC7B;;0DAAA;oBAED,SAAS,uBAAC,GAAW;WACV,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;CAC5B,CAAA;mBAED,WAAe;WACJ,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;CAC9B,CAAA;mBAED,QAAY;WACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;CAC3B,CAAA;oBAED,MAAM,oBAAC,GAAW;WACP,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;CACzB,CAAA;oBAED,QAAQ,sBAAC,GAAW,EAAE,GAAW;QACzB,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC;UAAE,OAAO,IAAI,CAAC,EAAA;QAE9B,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;WACrB,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;CAClC,CAAA;oBAED,QAAQ,sBAAC,GAAW,EAAE,GAAW,EAAE,GAAG;QAC9B,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC;UAAE,OAAO,EAAA;QAEzB,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;QACjD,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;CACnB,CAAA;;;;;oBAMD,MAAM;;;WACK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,GAAG;YACd,IAAI,GAAG,EAAE,CAAC;cACZ,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,KAAK,WAAK,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,GAAA,CAAC,CAAA;eAC3D,IAAI,CAAC;KACf,CAAC,CAAC;CACN,CAAA;;mEACJ;AAED;;;;;;gBChEuB,IAAI,EAAE,GAAQ;6BAAL,GAAG,EAAE;;IACjCC,IAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAA;IACtB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG;QACxB,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAA;KACtB,CAAC,CAAC;IACH,OAAO,GAAG,CAAC;CACd;;ACHDA,IAAM,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;AAElmB,gBAAgB,SAAS,EAAE,KAAK,EAAE,KAAU;IACxCC,IAAI,MAAM,GAAG;QACT,MAAM,EAAE;YACJ,OAAO,EAAE,CAAC;YACV,OAAO,EAAE,EAAE;YACX,IAAI,EAAE,EAAE;SACX;QACD,OAAO,EAAE;YACL,OAAO,EAAE,MAAM;SAClB;QACD,OAAO,EAAE;YACL,IAAI,EAAE,IAAI;YACV,OAAO,EAAE;gBACL,SAAS,EAAE;oBACP,IAAI,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC;oBAC9B,KAAK,EAAE;wBACH,MAAM,EAAE,YAAY;wBACpB,KAAK,EAAE,cAAc;wBACrB,OAAO,EAAE,mBAAmB;qBAC/B;iBACJ;gBACD,OAAO,EAAE;oBACL,KAAK,EAAE,SAAS;iBACnB;gBACD,WAAW,EAAE;oBACT,KAAK,EAAE,eAAe;iBACzB;aACJ;SACJ;QACD,KAAK,EAAE;YACH;gBACI,IAAI,EAAE,UAAU;gBAChB,WAAW,EAAE,KAAK;gBAClB,SAAS,EAAE;oBACP,IAAI,EAAE,IAAI;oBACV,QAAQ,EAAE,MAAM;oBAChB,SAAS,EAAE;wBACP,SAAS,EAAE,QAAQ;qBACtB;iBACJ;gBACD,IAAI,EAAE,EAAE;aACX;SACJ;QACD,KAAK,EAAE;YACH;gBACI,IAAI,EAAE,OAAO;gBACb,WAAW,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC;aAE1B;SACJ;QACD,MAAM,EAAE,EAAE;QACV,KAAK,EAAE,MAAM;QACb,UAAU,EAAE,KAAK;QACjB,QAAQ,EAAE;YACN,IAAI,EAAE,IAAI;YACV,QAAQ,EAAE,IAAI;;YAEd,WAAW,EAAE,SAAS;YACtB,WAAW,EAAE,SAAS;YACtB,UAAU,EAAE,CAAC;;YAEb,MAAM,EAAE,EAAE;YACV,KAAK,EAAE,EAAE;YACT,GAAG,EAAE,GAAG;SACX;KACJ,CAAC;IACFD,IAAM,QAAQ,GAAG,KAAK,CAAC,WAAW,CAAC;IACnC,IAAI,QAAQ,GAAG,CAAC,EAAE;QACd,KAAKC,IAAI,QAAQ,GAAG,CAAC,EAAE,QAAQ,GAAG,QAAQ,EAAE,QAAQ,EAAE,EAAE;YACpDD,IAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC;YAChD,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACjCA,IAAM,IAAI,GAAG,MAAM,CAAC;gBAChB,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,SAAS;gBACf,IAAI,EAAE,EAAE;aACX,EAAE,KAAK,CAAC,CAAC;YACV,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5B;QACDA,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;QAChC,KAAKC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;YAC/B,KAAKA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;gBAC/B,IAAI,CAAC,KAAK,CAAC,EAAE;oBACT,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;iBACnD;qBAAM;oBACH,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;iBACxD;aACJ;SACJ;KACJ;IACD,OAAO,MAAM,CAAC;CACjB;AAEDD,IAAM,OAAO,GAAG;IACZ,MAAM,EAAE,UAAS,KAAK;QAClB,OAAO,MAAM,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;KAChC;IACD,KAAK,EAAE,UAAS,KAAK;QACjB,OAAO,MAAM,CAAC,KAAK,EAAE,KAAK,EAAE;YACxB,WAAW,EAAE,EAAE;YACf,KAAK,EAAE;gBACH,MAAM,EAAE;oBACJ,IAAI,EAAE,IAAI;oBACV,QAAQ,EAAE,SAAS;iBACtB;aACJ;SACJ,CAAC,CAAC;KACN;IACD,KAAK,EAAE,UAAS,KAAK;QACjBC,IAAI,MAAM,GAAG;YACT,OAAO,EAAE;gBACL,OAAO,EAAE,MAAM;gBACf,SAAS,EAAE,2BAA2B;aACzC;YACD,MAAM,EAAE,EAAE;YACV,KAAK,EAAE,MAAM;SAChB,CAAC;QACFA,IAAI,KAAK,GAAG;YACR,IAAI,EAAE,MAAM;YACZ,IAAI,EAAE,KAAK;YACX,MAAM,EAAE,KAAK;YACb,MAAM,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC;YACtB,IAAI,EAAE,EAAE;SACX,CAAC;QACF,KAAK,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,KAAK,IAAI,MAAM,CAAC;QACxD,KAAKA,IAAI,QAAQ,GAAG,CAAC,EAAE,QAAQ,GAAG,KAAK,CAAC,QAAQ,EAAE,QAAQ,GAAG,QAAQ,EAAE,QAAQ,EAAE,EAAE;YAC/EA,IAAI,IAAI,GAAG;gBACP,IAAI,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,KAAK,UAAU,GAAG,QAAQ,CAAC;gBAC5D,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,CAAC,IAAI,CAAC;aAC1C,CAAC;YACF,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SACzB;QAED,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1B,OAAO,MAAM,CAAC;KACjB;CACJ,CAAC;AAEF,2BAA0C,SAAS,EAAE,IAAI;IACrDA,IAAI,EAAE,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;IAC5B,IAAI,EAAE,EAAE;QACJA,IAAI,KAAK,GAAG,IAAI,YAAY,SAAS,GAAG,IAAI,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QACnE,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC;KACpB;CACJ;;;;;;;ACxHDD,IAAM,UAAU,GAAG,GAAG,CAAC;;;;;;;;;AASvB,kBAAkB,EAAY,EAAE,KAAa,EAAE,KAAW;IACtDC,IAAI,KAAK,GAAG,IAAI,CAAC;IACjB,OAAO;;;;QACHA,IAAI,OAAO,GAAG,KAAK,IAAI,IAAI,CAAC;QAC5B,YAAY,CAAC,KAAK,CAAC,CAAC;QACpB,KAAK,GAAG,UAAU,CAAC;YACf,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SAC3B,EAAE,KAAK,CAAC,CAAC;KACb,CAAC;CACL;AAEDC,QAAQ,CAAC,QAAQ,EAAE,4CAA4C,EAC3D,gHAAgH,EAChH,UAAS,IAAoB;IAC7BD,IAAI,IAAI,GAAe,IAAI,CAAC;IAC5BA,IAAI,KAAK,GAAG,IAAI,CAAC;IAEjB,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,WAAW,EAAE;QACrC,YAAY,EAAE,KAAK;QACnB,UAAU,EAAE,KAAK;QACjB,GAAG,cAAA;YACC,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;SAChC;KACJ,CAAC,CAAC;IAEH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE;QACb,IAAI,OAAO,IAAI,CAAC,KAAK,KAAK,UAAU,EAAE;YAClC,IAAI,CAAC,KAAK,CAAC,UAAC,IAAI,EAAE,GAAG;gBACjB,IAAI,GAAG,EAAE;oBACL,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACtB;qBAAM;oBACH,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;iBACxB;aACJ,CAAC,CAAC;SACN;aAAK;YACF,IAAI,CAAC,MAAM,EAAE,CAAC;SACjB;KACJ,CAAC,CAAC;IAEH,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE;QACf,IAAI,CAAC,YAAY,EAAE,CAAC;KACvB,CAAC,CAAC;IAEH,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE;QACf,IAAI,IAAI,CAAC,IAAI,EAAE;YACX,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC7B;KACJ,CAAC,CAAC;IAEH,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC,UAAC,IAAI;QAC3B,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACpC,OAAO;SACV;QACD,IAAI,CAAC,KAAK,EAAE;YACR,KAAK,GAAGE,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACxC;QACDH,IAAM,SAAS,GAAG,IAAI,CAAC,UAAU,IAAI,KAAK,CAAC;QAC3CA,IAAM,MAAM,GAAGI,iBAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QACxC,IAAI,MAAM,IAAI,KAAK,EAAE;YACjB,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SAC3B;KACJ,EAAE,UAAU,CAAC,CAAC;IAEf,IAAI,CAAC,WAAW,GAAG;QACf,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB,CAAC;IAEF,IAAI,CAAC,YAAY,GAAG;QAChB,IAAI,KAAK,EAAE;YACP,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,KAAK,GAAG,IAAI,CAAC;SAChB;KACJ,CAAC;CACL,CAAC,CAAC;;AC3GH,YAAe;IACX,WAAAC,WAAS;IACT,SAAAD,SAAO;CACV,CAAC;;;;"}