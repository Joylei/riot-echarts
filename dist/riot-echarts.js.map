{"version":3,"file":null,"sources":["../src/dataTable.ts","../src/util.ts","../src/chartFactory.ts","../src/echart.ts","../src/index.ts"],"sourcesContent":["type Field = { name: string };\r\n/**\r\n* Wrap data array for convinient operations.\r\n* the first line of the array is columns,\r\n* and the rest lines are data rows\r\n*/\r\nexport default class DataTable {\r\n    columns: Field[];\r\n    rows: any[][];\r\n    /**\r\n    * @param {Object[][]} data the first line of the array is columns,and the rest lines are data rows\r\n    */\r\n    constructor(data: any[][]) {\r\n        data = data || [];\r\n\r\n        this.columns = [];\r\n        let columns = data[0] || [];\r\n        columns.forEach(item => this.columns.push({ name: item }))\r\n        this.rows = data.slice(1);\r\n    }\r\n\r\n    getColumn(col: number) {\r\n        return this.columns[col];\r\n    }\r\n\r\n    get columnCount() {\r\n        return this.columns.length;\r\n    }\r\n\r\n    get rowCount() {\r\n        return this.rows.length;\r\n    }\r\n\r\n    getRow(row: number) {\r\n        return this.rows[row];\r\n    }\r\n\r\n    getValue(row: number, col: number) {\r\n        if (row < 0 || col < 0) return null;\r\n\r\n        const item = this.rows[row];\r\n        return item ? item[col] : null;\r\n    }\r\n\r\n    setValue(row: number, col: number, val) {\r\n        if (row < 0 || col < 0) return;\r\n\r\n        const item = this.rows[row] || (this.rows[row] = []);\r\n        item[col] = val;\r\n    }\r\n\r\n    /**\r\n    * convert data rows to objects\r\n    * @return {Object[]}\r\n    */\r\n    toJSON(): Object[] {\r\n        return this.rows.map(row => {\r\n            const item = {};\r\n            this.columns.forEach((col, index) => item[col.name] = row[index])\r\n            return item;\r\n        });\r\n    }\r\n}\r\n","export function extend(dest, src = {}){\n    const obj = dest || {}\n    Object.keys(src).forEach(key =>{\n        obj[key] = src[key]\n    });\n    return obj;\n}\n\nexport function isFunction(obj){\n    return typeof obj === 'function'\n}","import DataTable from './dataTable';\r\nimport { extend } from './util';\r\n\r\nconst COLORS = ['#a489d6', '#239afc', '#54d81c', '#5856ce', '#4386a0', '#093084', '#26aabf', '#5a25f9', '#76a0db', '#7588dd', '#f7eb91', '#daf783', '#d321e0', '#7634ef', '#05bc9b', '#cea146', '#ffbfc0', '#5dfc7d', '#ffc9f9', '#9ad5e0', '#8ea4e5', '#490c7f', '#49fcb4', '#20a33c', '#f7ee40', '#fcf63f', '#efef1f', '#f45642', '#e08374', '#30b6ff', '#f75f4f', '#27ddd7', '#af2f49', '#dbc4fc', '#53b220', '#a71dd1', '#15bfa2', '#f79f9e', '#c92427', '#380170', '#ed9f78', '#f464d5', '#dd6158', '#f7cfad', '#36e830', '#80f782', '#90f9ac', '#c69715', '#0a8ed6', '#9ec942', '#f9b1c8', '#a114ff', '#51dba4', '#a4abf2'];\r\n\r\nfunction addToolbox(option) {\r\n    option.toolbox = {\r\n        show: true,\r\n        feature: {\r\n            magicType: {\r\n                type: ['line', 'bar', 'stack'],\r\n                title: {\r\n                    'line': 'Line Chart',\r\n                    'bar': 'Column Chart',\r\n                    'stack': 'Stacked Bar Chart'\r\n                }\r\n            },\r\n            restore: {\r\n                title: 'Restore'\r\n            },\r\n            saveAsImage: {\r\n                title: 'Save AS Image'\r\n            },\r\n        }\r\n    }\r\n}\r\n\r\nfunction addRoom(option) {\r\n    option.dataZoom = {\r\n        show: true,\r\n        realtime: true,\r\n        //dataBackgroundColor: \"#80D9C3\",\r\n        handleColor: '#018564',\r\n        fillerColor: '#80D9C3',\r\n        handleSize: 3,\r\n        //y : 'bottom',\r\n        height: 20,\r\n        start: 50,\r\n        end: 100\r\n    }\r\n}\r\n\r\nfunction create({type, table, color, dataZoom, toolbox}) {\r\n    let option = {\r\n        legend: { // legend configuration\r\n            //padding: 5, // The inner padding of the legend, in px, defaults to 5. Can be set as array - [top, right, bottom, left].\r\n            //itemGap: 10, // The pixel gap between each item in the legend. It is horizontal in a legend with horizontal layout, and vertical in a legend with vertical layout.\r\n            data: [],\r\n            align: 'left'\r\n        },\r\n        tooltip: { // tooltip configuration\r\n            trigger: 'item', // trigger type. Defaults to data trigger. Can also be: 'axis'\r\n        },\r\n        xAxis: [ // The horizontal axis in Cartesian coordinates\r\n            {\r\n                type: 'category', // Axis type. xAxis is category axis by default. As for value axis, please refer to the 'yAxis' chapter.\r\n                boundaryGap: true,\r\n                axisLabel: {\r\n                    show: true,\r\n                    interval: 'auto',\r\n                    textStyle: {\r\n                        fontStyle: 'italic'\r\n                    }\r\n                },\r\n                data: []\r\n            }\r\n        ],\r\n        yAxis: [ // The vertical axis in Cartesian coordinates\r\n            {\r\n                type: 'value', // Axis type. yAxis is value axis by default. As for category axis, please refer to the 'xAxis' chapter.\r\n                //boundaryGap: [0.1, 0.1], // Blank border on each side of the coordinate axis. Value in the array represents percentage.\r\n                //splitNumber: 4 // Applicable to value axis. The number of segments. Defaults to 5.\r\n            }\r\n        ],\r\n        series: [],\r\n        color,\r\n        calculable: false,\r\n\r\n    };\r\n    const colCount = table.columnCount;\r\n    if (colCount > 1) {\r\n        for (let colIndex = 1; colIndex < colCount; colIndex++) {\r\n            const colName = table.getColumn(colIndex).name;\r\n            option.legend.data.push(colName);\r\n            option.series.push({\r\n                name: colName,\r\n                type: type,\r\n                data: []\r\n            });\r\n        }\r\n        const rowCount = table.rowCount;\r\n        for (let i = 0; i < rowCount; i++) {\r\n            for (let j = 0; j < colCount; j++) {\r\n                if (j === 0) {\r\n                    option.xAxis[0].data.push(table.getValue(i, j));\r\n                } else {\r\n                    option.series[j - 1].data.push(table.getValue(i, j));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (toolbox === true) {\r\n        addToolbox(option)\r\n    } else if (toolbox) {\r\n        (<any>option).toolbox = toolbox\r\n    }\r\n    if (dataZoom === true) {\r\n        addRoom(option)\r\n    } else if (dataZoom) {\r\n        (<any>option).dataZoom = dataZoom\r\n    }\r\n    return option;\r\n}\r\n\r\nconst factory = {\r\n    'line': function (obj) {\r\n        return create(obj);\r\n    },\r\n    'bar': function (obj) {\r\n        let option = create(obj)\r\n        option.series.forEach(serie =>{\r\n            extend(serie, {\r\n                barMaxWidth: 30,\r\n                label: {\r\n                    normal: {\r\n                        show: true,\r\n                        position: 'outside'\r\n                    }\r\n                }\r\n            })\r\n        })\r\n        return option;\r\n    },\r\n    'pie': function (obj) {\r\n        var option = <any>create(obj)\r\n        option.tooltip.formatter = '{a} <br/>{b} : {c} ({d}%)'\r\n        let serie = option.series[0];\r\n        if(serie){\r\n            extend(serie, {\r\n                radius: '55%',\r\n                center: ['50%', '50%'],\r\n                data: []\r\n            })\r\n        }\r\n        return option;\r\n    }\r\n};\r\n\r\nexport default function createChartOption({type, data, color = COLORS, dataZoom, toolbox}) {\r\n    let fn = factory[type];\r\n    if (fn) {\r\n        let table = data instanceof DataTable ? data : new DataTable(data);\r\n        return fn({ type, table, color, dataZoom, toolbox });\r\n    } else {\r\n        throw new Error('unsupported chart type in simple mode, please use option directly')\r\n    }\r\n}\r\n","import factory from './chartFactory';\r\nimport * as echarts from 'echarts'\r\nimport DataTable from './dataTable';\r\nimport * as riot from 'riot';\r\nimport {isFunction, extend} from './util'\r\n\r\ninterface IEchartTag extends RiotTag {\r\n    isMounted: boolean;\r\n    chart: any;\r\n    drawChart();\r\n    redrawChart();\r\n    destroyChart();\r\n}\r\n\r\ntype Callback = (err, data) => any;\r\ntype DataFunc = () => (DataTable | any[] | Thenable)\r\ntype LazyDataFunc = (cb:Callback)=>any\r\ntype Thenable = { then:(success: (data) => any, error: (err)=>any)=>any }\r\ninterface IEchartTagOpts {\r\n    /**\r\n     * ECharts option\r\n     */\r\n    option?: any,\r\n    simple?: {\r\n        /**\r\n         * chart type\r\n         */\r\n        type?: string,\r\n        /**\r\n         * color sheets;\r\n         */\r\n        color?: Array<string>,\r\n\r\n        /**\r\n         * ECharts toolbox options\r\n         */\r\n        toolbox?: boolean | Object,\r\n\r\n        /**\r\n         * ECharts dataZoom options\r\n         */\r\n        dataZoom?: boolean | Object, \r\n        /**\r\n         * provide data directly; otherwise be provided by function;\r\n         * the data can be:\r\n         * - DataTable\r\n         * - any[][]\r\n         * - a function returns DataTable or any[][]\r\n         * - a function returns thenable object\r\n         * - a thenable object\r\n         * - a function accept a callback to handle data \r\n         */\r\n        data?: DataTable | any[] | Thenable | DataFunc | LazyDataFunc;\r\n    }\r\n}\r\n\r\nconst DRAW_DELAY = 500;\r\n/**\r\n   * delay function call until there is no more invocation;\r\n   * taken from https://remysharp.com/2010/07/21/throttling-function-calls\r\n   * @param  {Function} fn    [description]\r\n   * @param  {number}   delay [description]\r\n   * @param  {any}      scope [description]\r\n   * @return {Function}       [description]\r\n   */\r\nfunction debounce(fn: Function, delay: number, scope?: any) {\r\n    let timer = null;\r\n    return function(...args) {\r\n        let context = scope || this;\r\n        clearTimeout(timer);\r\n        timer = setTimeout(function() {\r\n            fn.apply(context, args);\r\n        }, delay);\r\n    };\r\n}\r\n\r\nriot.tag('echart', '<div class=\"chart\" ref=\"chartHost\" ></div>',\r\n    'echart, echart .chart,[data-is=\"echart\"], [data-is=\"echart\"] .chart {display:block; width:100%; height: 100%;}', \r\n    function(opts: IEchartTagOpts) {\r\n    let self = <IEchartTag>this;\r\n    let chart = null;\r\n    \r\n    Object.defineProperty(self, 'chart', {\r\n        get(){\r\n            return chart\r\n        }\r\n    })\r\n\r\n    function getHost(){\r\n        //compatible with riot@2.x.x\r\n        return self.refs['chartHost'] || self.root.querySelector('[.chart]')\r\n    }\r\n\r\n    let _chartHost:HTMLElement\r\n    let _option = {}\r\n    self.on('mount', () => {\r\n        if(!echarts || !isFunction(echarts.init)){\r\n            throw new Error('please import ECharts!!!')\r\n        }\r\n\r\n        _chartHost = <HTMLElement>getHost();\r\n        self.drawChart()\r\n    });\r\n\r\n    self.on('unmount', () => {\r\n        self.destroyChart();\r\n    });\r\n\r\n    self.on('updated', ()=>{\r\n        self.drawChart()\r\n    })\r\n\r\n    self.drawChart = debounce(() => {\r\n        if (!self.isMounted || !_chartHost) {\r\n            return;\r\n        }\r\n        if (!chart) {\r\n            chart = echarts.init(_chartHost);\r\n        }\r\n        if(opts.option){\r\n            chart.setOption(opts.option);\r\n            return\r\n        }\r\n        if(opts.simple){\r\n            const chartType = opts.simple.type || 'pie';\r\n            chart.showLoading()\r\n            const cb = (err, data)=>{\r\n                if(err){\r\n                    console.error(err);\r\n                    return\r\n                }\r\n                if(data && isFunction(data.then)) {\r\n                    data.then(d => cb(null,d), cb)\r\n                    return\r\n                }\r\n                let chartObj = extend({},opts.simple)\r\n                chartObj.data = data\r\n                const option = factory(chartObj);\r\n                if (option && chart) {\r\n                    chart.setOption(option);\r\n                }\r\n                chart.hideLoading()\r\n            };\r\n            let data;\r\n            if(isFunction(opts.simple.data)){\r\n                let result = (<any>opts.simple.data).call(null, cb)\r\n                if(!result) {\r\n                    return\r\n                }\r\n                data = result\r\n            }\r\n            data = data || opts.simple.data\r\n            if(data){\r\n                cb(null, data)\r\n            }else{\r\n                chart.hideLoading()\r\n            }\r\n        }\r\n    }, DRAW_DELAY);\r\n\r\n    self.redrawChart = () => {\r\n        self.destroyChart();\r\n        self.update();\r\n    };\r\n\r\n    self.destroyChart = () => {\r\n        if (chart) {\r\n            chart.dispose();\r\n            chart = null;\r\n        }\r\n    };\r\n});\r\n\r\n//hook window resize event\r\nwindow.addEventListener('resize', debounce(function(e){\r\n    let charts = [].slice.call(document.querySelectorAll('echart, [data-is=\"echart\"]'))\r\n    charts.forEach(el =>{\r\n        let tag = <IEchartTag>el._tag\r\n        if(tag && tag.chart){\r\n            tag.chart.resize()\r\n        }\r\n    })\r\n}, 300))","import DataTable from './dataTable';\r\nimport factory from './chartFactory';\r\nimport './echart';\r\n\r\nexport default {\r\n    DataTable,\r\n    factory\r\n};\r\n"],"names":["this","const","let","riot.tag","echarts.init","factory","tag"],"mappings":";;;;;;AACA;;;;;AAKe,mCAMC,IAAa;;;QACjB,GAAG,IAAI,IAAI,EAAE,CAAC;QAEd,CAAC,OAAO,GAAG,EAAE,CAAC;QACd,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;WACrB,CAAC,OAAO,CAAC,UAAA,IAAI,WAAIA,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,GAAA,CAAC,CAAA;QACtD,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;CAC7B;;0DAAA;oBAED,SAAS,uBAAC,GAAW;WACV,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;CAC5B,CAAA;mBAED,WAAe;WACJ,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;CAC9B,CAAA;mBAED,QAAY;WACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;CAC3B,CAAA;oBAED,MAAM,oBAAC,GAAW;WACP,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;CACzB,CAAA;oBAED,QAAQ,sBAAC,GAAW,EAAE,GAAW;QACzB,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC;UAAE,OAAO,IAAI,CAAC,EAAA;QAE9B,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;WACrB,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;CAClC,CAAA;oBAED,QAAQ,sBAAC,GAAW,EAAE,GAAW,EAAE,GAAG;QAC9B,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC;UAAE,OAAO,EAAA;QAEzB,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC;QACjD,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;CACnB,CAAA;;;;;oBAMD,MAAM;;;WACK,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAA,GAAG;YACd,IAAI,GAAG,EAAE,CAAC;cACZ,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,GAAG,EAAE,KAAK,WAAK,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,GAAA,CAAC,CAAA;eAC1D,IAAI,CAAC;KACf,CAAC,CAAC;CACN,CAAA;;mEACJ,AAED;;gBChEuB,IAAI,EAAE,GAAQ;6BAAL,GAAG,EAAE;;IACjCC,IAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAA;IACtB,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,UAAA,GAAG;QACxB,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAA;KACtB,CAAC,CAAC;IACH,OAAO,GAAG,CAAC;CACd;AAED,oBAA2B,GAAG;IAC1B,OAAO,OAAO,GAAG,KAAK,UAAU,CAAA;CACnC;;ACPDA,IAAM,MAAM,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC;AAElmB,oBAAoB,MAAM;IACtB,MAAM,CAAC,OAAO,GAAG;QACb,IAAI,EAAE,IAAI;QACV,OAAO,EAAE;YACL,SAAS,EAAE;gBACP,IAAI,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC;gBAC9B,KAAK,EAAE;oBACH,MAAM,EAAE,YAAY;oBACpB,KAAK,EAAE,cAAc;oBACrB,OAAO,EAAE,mBAAmB;iBAC/B;aACJ;YACD,OAAO,EAAE;gBACL,KAAK,EAAE,SAAS;aACnB;YACD,WAAW,EAAE;gBACT,KAAK,EAAE,eAAe;aACzB;SACJ;KACJ,CAAA;CACJ;AAED,iBAAiB,MAAM;IACnB,MAAM,CAAC,QAAQ,GAAG;QACd,IAAI,EAAE,IAAI;QACV,QAAQ,EAAE,IAAI;;QAEd,WAAW,EAAE,SAAS;QACtB,WAAW,EAAE,SAAS;QACtB,UAAU,EAAE,CAAC;;QAEb,MAAM,EAAE,EAAE;QACV,KAAK,EAAE,EAAE;QACT,GAAG,EAAE,GAAG;KACX,CAAA;CACJ;AAED,gBAAgB,GAAA;QAAC,IAAI,YAAE;QAAA,KAAK,aAAE;QAAA,KAAK,aAAE;QAAA,QAAQ,gBAAE;QAAA,OAAO;;IAClDC,IAAI,MAAM,GAAG;QACT,MAAM,EAAE;;;YAGJ,IAAI,EAAE,EAAE;YACR,KAAK,EAAE,MAAM;SAChB;QACD,OAAO,EAAE;YACL,OAAO,EAAE,MAAM;SAClB;QACD,KAAK,EAAE;YACH;gBACI,IAAI,EAAE,UAAU;gBAChB,WAAW,EAAE,IAAI;gBACjB,SAAS,EAAE;oBACP,IAAI,EAAE,IAAI;oBACV,QAAQ,EAAE,MAAM;oBAChB,SAAS,EAAE;wBACP,SAAS,EAAE,QAAQ;qBACtB;iBACJ;gBACD,IAAI,EAAE,EAAE;aACX;SACJ;QACD,KAAK,EAAE;YACH;gBACI,IAAI,EAAE,OAAO;aAGhB;SACJ;QACD,MAAM,EAAE,EAAE;QACV,OAAA,KAAK;QACL,UAAU,EAAE,KAAK;KAEpB,CAAC;IACFD,IAAM,QAAQ,GAAG,KAAK,CAAC,WAAW,CAAC;IACnC,IAAI,QAAQ,GAAG,CAAC,EAAE;QACd,KAAKC,IAAI,QAAQ,GAAG,CAAC,EAAE,QAAQ,GAAG,QAAQ,EAAE,QAAQ,EAAE,EAAE;YACpDD,IAAM,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC;YAC/C,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACjC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;gBACf,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,IAAI;gBACV,IAAI,EAAE,EAAE;aACX,CAAC,CAAC;SACN;QACDA,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;QAChC,KAAKC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;YAC/B,KAAKA,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,EAAE,CAAC,EAAE,EAAE;gBAC/B,IAAI,CAAC,KAAK,CAAC,EAAE;oBACT,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;iBACnD;qBAAM;oBACH,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;iBACxD;aACJ;SACJ;KACJ;IACD,IAAI,OAAO,KAAK,IAAI,EAAE;QAClB,UAAU,CAAC,MAAM,CAAC,CAAA;KACrB;SAAM,IAAI,OAAO,EAAE;QACV,MAAO,CAAC,OAAO,GAAG,OAAO,CAAA;KAClC;IACD,IAAI,QAAQ,KAAK,IAAI,EAAE;QACnB,OAAO,CAAC,MAAM,CAAC,CAAA;KAClB;SAAM,IAAI,QAAQ,EAAE;QACX,MAAO,CAAC,QAAQ,GAAG,QAAQ,CAAA;KACpC;IACD,OAAO,MAAM,CAAC;CACjB;AAEDD,IAAM,OAAO,GAAG;IACZ,MAAM,EAAE,UAAU,GAAG;QACjB,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC;KACtB;IACD,KAAK,EAAE,UAAU,GAAG;QAChBC,IAAI,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;QACxB,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,UAAA,KAAK;YACvB,MAAM,CAAC,KAAK,EAAE;gBACV,WAAW,EAAE,EAAE;gBACf,KAAK,EAAE;oBACH,MAAM,EAAE;wBACJ,IAAI,EAAE,IAAI;wBACV,QAAQ,EAAE,SAAS;qBACtB;iBACJ;aACJ,CAAC,CAAA;SACL,CAAC,CAAA;QACF,OAAO,MAAM,CAAC;KACjB;IACD,KAAK,EAAE,UAAU,GAAG;QAChB,IAAI,MAAM,GAAQ,MAAM,CAAC,GAAG,CAAC,CAAA;QAC7B,MAAM,CAAC,OAAO,CAAC,SAAS,GAAG,2BAA2B,CAAA;QACtDA,IAAI,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC7B,IAAG,KAAK,EAAC;YACL,MAAM,CAAC,KAAK,EAAE;gBACV,MAAM,EAAE,KAAK;gBACb,MAAM,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC;gBACtB,IAAI,EAAE,EAAE;aACX,CAAC,CAAA;SACL;QACD,OAAO,MAAM,CAAC;KACjB;CACJ,CAAC;AAEF,2BAA0C,GAAA;QAAC,IAAI,YAAE;QAAA,IAAI,YAAU;2DAAA,MAAM,CAAE;QAAA,QAAQ,gBAAE;QAAA,OAAO;;IACpFA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;IACvB,IAAI,EAAE,EAAE;QACJA,IAAI,KAAK,GAAG,IAAI,YAAY,SAAS,GAAG,IAAI,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;QACnE,OAAO,EAAE,CAAC,EAAE,MAAA,IAAI,EAAE,OAAA,KAAK,EAAE,OAAA,KAAK,EAAE,UAAA,QAAQ,EAAE,SAAA,OAAO,EAAE,CAAC,CAAC;KACxD;SAAM;QACH,MAAM,IAAI,KAAK,CAAC,mEAAmE,CAAC,CAAA;KACvF;CACJ;;ACpGDD,IAAM,UAAU,GAAG,GAAG,CAAC;;;;;;;;;AASvB,kBAAkB,EAAY,EAAE,KAAa,EAAE,KAAW;IACtDC,IAAI,KAAK,GAAG,IAAI,CAAC;IACjB,OAAO;;;;QACHA,IAAI,OAAO,GAAG,KAAK,IAAI,IAAI,CAAC;QAC5B,YAAY,CAAC,KAAK,CAAC,CAAC;QACpB,KAAK,GAAG,UAAU,CAAC;YACf,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SAC3B,EAAE,KAAK,CAAC,CAAC;KACb,CAAC;CACL;AAEDC,QAAQ,CAAC,QAAQ,EAAE,4CAA4C,EAC3D,gHAAgH,EAChH,UAAS,IAAoB;IAC7BD,IAAI,IAAI,GAAe,IAAI,CAAC;IAC5BA,IAAI,KAAK,GAAG,IAAI,CAAC;IAEjB,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE;QACjC,GAAG,cAAA;YACC,OAAO,KAAK,CAAA;SACf;KACJ,CAAC,CAAA;IAEF;;QAEI,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAA;KACvE;IAEDA,IAAI,UAAsB,CAAA;IAC1BA,IAAI,OAAO,GAAG,EAAE,CAAA;IAChB,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE;QACb,IAAG,CAAC,OAAO,IAAI,CAAC,UAAU,CAACE,YAAY,CAAC,EAAC;YACrC,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAA;SAC9C;QAED,UAAU,GAAgB,OAAO,EAAE,CAAC;QACpC,IAAI,CAAC,SAAS,EAAE,CAAA;KACnB,CAAC,CAAC;IAEH,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE;QACf,IAAI,CAAC,YAAY,EAAE,CAAC;KACvB,CAAC,CAAC;IAEH,IAAI,CAAC,EAAE,CAAC,SAAS,EAAE;QACf,IAAI,CAAC,SAAS,EAAE,CAAA;KACnB,CAAC,CAAA;IAEF,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU,EAAE;YAChC,OAAO;SACV;QACD,IAAI,CAAC,KAAK,EAAE;YACR,KAAK,GAAGA,YAAY,CAAC,UAAU,CAAC,CAAC;SACpC;QACD,IAAG,IAAI,CAAC,MAAM,EAAC;YACX,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC7B,OAAM;SACT;QACD,IAAG,IAAI,CAAC,MAAM,EAAC;YACXH,IAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,IAAI,KAAK,CAAC;YAC5C,KAAK,CAAC,WAAW,EAAE,CAAA;YACnBA,IAAM,EAAE,GAAG,UAAC,GAAG,EAAE,IAAI;gBACjB,IAAG,GAAG,EAAC;oBACH,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBACnB,OAAM;iBACT;gBACD,IAAG,IAAI,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;oBAC9B,IAAI,CAAC,IAAI,CAAC,UAAA,CAAC,WAAI,EAAE,CAAC,IAAI,EAAC,CAAC,CAAC,GAAA,EAAE,EAAE,CAAC,CAAA;oBAC9B,OAAM;iBACT;gBACDC,IAAI,QAAQ,GAAG,MAAM,CAAC,EAAE,EAAC,IAAI,CAAC,MAAM,CAAC,CAAA;gBACrC,QAAQ,CAAC,IAAI,GAAG,IAAI,CAAA;gBACpBD,IAAM,MAAM,GAAGI,iBAAO,CAAC,QAAQ,CAAC,CAAC;gBACjC,IAAI,MAAM,IAAI,KAAK,EAAE;oBACjB,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;iBAC3B;gBACD,KAAK,CAAC,WAAW,EAAE,CAAA;aACtB,CAAC;YACFH,IAAI,IAAI,CAAC;YACT,IAAG,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAC;gBAC5BA,IAAI,MAAM,GAAS,IAAI,CAAC,MAAM,CAAC,IAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;gBACnD,IAAG,CAAC,MAAM,EAAE;oBACR,OAAM;iBACT;gBACD,IAAI,GAAG,MAAM,CAAA;aAChB;YACD,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAA;YAC/B,IAAG,IAAI,EAAC;gBACJ,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;aACjB;iBAAI;gBACD,KAAK,CAAC,WAAW,EAAE,CAAA;aACtB;SACJ;KACJ,EAAE,UAAU,CAAC,CAAC;IAEf,IAAI,CAAC,WAAW,GAAG;QACf,IAAI,CAAC,YAAY,EAAE,CAAC;QACpB,IAAI,CAAC,MAAM,EAAE,CAAC;KACjB,CAAC;IAEF,IAAI,CAAC,YAAY,GAAG;QAChB,IAAI,KAAK,EAAE;YACP,KAAK,CAAC,OAAO,EAAE,CAAC;YAChB,KAAK,GAAG,IAAI,CAAC;SAChB;KACJ,CAAC;CACL,CAAC,CAAC;;AAGH,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,QAAQ,CAAC,UAAS,CAAC;IACjDA,IAAI,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,4BAA4B,CAAC,CAAC,CAAA;IACnF,MAAM,CAAC,OAAO,CAAC,UAAA,EAAE;QACbA,IAAII,MAAG,GAAe,EAAE,CAAC,IAAI,CAAA;QAC7B,IAAGA,MAAG,IAAIA,MAAG,CAAC,KAAK,EAAC;YAChBA,MAAG,CAAC,KAAK,CAAC,MAAM,EAAE,CAAA;SACrB;KACJ,CAAC,CAAA;CACL,EAAE,GAAG,CAAC,CAAC,CAAA;;AClLR,YAAe;IACX,WAAA,SAAS;IACT,SAAAD,iBAAO;CACV,CAAC;;;;"}